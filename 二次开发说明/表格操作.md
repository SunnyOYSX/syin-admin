## 表格操作

### 加载数据

```js
this.getRequestData();
```

### 接收选择项 ID

```html
<el-table
	@selection-change="selectionChange"
>
```

### 删除/禁用

| 操作 | 方法 | 参数1 | 参数2 | 参数3 | 备注 |
| :----- | ----: | :----: | :----: | :----: | :----: |
| 删除 | del | id | operate | | id = -1 表示批量操作, 为正整数为单个删除; operate 0: 恢复, 1: 删除 |
| 禁用 | disabled | id | operate | | id = -1 表示批量操作, 为正整数为单个删除; operate 0: 启用, 1: 禁用 |

```
@click="del(-1, 1)"

@click="disabled(scope.row.id, 1)" 
```

### 排序

```html
<!-- 排序按钮 -->
<el-button size="mini" type="success" icon="el-icon-sort" @click="sort">排序</el-button>

<!-- 排序模板 -->
<el-table-column label="排序" width="86">
	<template slot-scope="{row}">
		<el-input v-model="row.sort" type="number" size="mini" max="99" min="0"/>
	</template>
</el-table-column>
```

```js
data() {
	return {
		urls: {
			// 排序链接
			sort: '/system/adminsort'
		},
	}
},
```

## 封装表格操作

以排序为例

```js
let url = this.buildUrl('sort');
let data = this.extract('id, sort');
TableInstance.execute(url, data).then(res => {
	this.message('操作成功', 'success');
}).catch((e)=>{});
```

### 提取表格数据

```js
let data = this.extract('id, sort');
```

| 参数名 | 默认值 | 参数说明 | 备注 |
| :----- | ----: | :----: | :----: |
| fields  | | 需要提取数据的字段, 多个以 , 分隔 | 不传将返回id一维数组 |
| filter  | null | 自定义过滤器 | 当返回false时, 该项数据将不会加入提取数据中 |

### 数据提交

引入table.js

```js
import Table from '@/libs/Table.js';
```

实例化

```js
mounted() {
	this.instance = TableInstance = new Table(this);
},
```

执行请求

```js
TableInstance.execute(url, id, {operate}).then(res => {
}).catch((e)=>{});
```

execute 参数说明

| 参数名 | 默认值 | 参数说明 | 备注 |
| :----- | ----: | :----: | :----: |
| url  | | 提交链接 | |
| data | -1 | 提交的数据, 不限制数据类型 | 为 -1 时, 等同于选中的id数组 |
| mark | '' | 操作标示, 可传字符串或对象 | 为字符串将自动转换为对象, 对象键为 mark |